from langchain_google_genai import ChatGoogleGenerativeAI
import streamlit as st
from dotenv import load_dotenv
import random
import time

load_dotenv()

# Ultra Modern CSS with Glassmorphism
st.set_page_config(page_title="Fakhim-AI | The Ultimate Roast Machine ЁЯФе", page_icon="ЁЯФе", layout="centered")
st.markdown("""
<style>
@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap');

/* Epic Dark Theme with Animated Background */
html, body, [data-testid="stAppViewContainer"], .main, .stApp {
    background: #0a0a0f !important;
    background-image: 
        radial-gradient(at 20% 30%, rgba(255, 107, 107, 0.15) 0px, transparent 50%),
        radial-gradient(at 80% 70%, rgba(238, 90, 36, 0.15) 0px, transparent 50%),
        radial-gradient(at 50% 50%, rgba(99, 110, 114, 0.1) 0px, transparent 50%);
    font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif !important;
    color: #ffffff !important;
    min-height: 100vh !important;
    position: relative !important;
    overflow-x: hidden !important;
}

/* Animated gradient overlay */
html::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, transparent 30%, rgba(255, 107, 107, 0.05) 50%, transparent 70%);
    animation: gradientShift 8s ease infinite;
    pointer-events: none;
    z-index: 0;
}

@keyframes gradientShift {
    0%, 100% { transform: translateX(-50%) translateY(-50%) rotate(0deg); }
    50% { transform: translateX(50%) translateY(50%) rotate(180deg); }
}

/* Override Streamlit defaults */
.stApp > div:first-child {
    background: transparent !important;
}

[data-testid="stHeader"] {
    background: rgba(10, 10, 15, 0.8) !important;
    backdrop-filter: blur(20px) !important;
    border-bottom: 1px solid rgba(255, 107, 107, 0.1);
}

/* Container */
.block-container {
    max-width: 750px !important;
    margin: auto !important;
    padding: 2rem 1rem !important;
}

/* Ultra Modern Message Bubbles with Glassmorphism */
.user-msg {
    background: linear-gradient(135deg, rgba(255, 107, 107, 0.95) 0%, rgba(238, 90, 36, 0.95) 100%) !important;
    backdrop-filter: blur(10px) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    color: #ffffff !important;
    border-radius: 24px 24px 8px 24px !important;
    padding: 16px 22px !important;
    margin: 16px 0 16px auto !important;
    width: fit-content !important;
    max-width: 70% !important;
    font-size: 1rem !important;
    font-weight: 500 !important;
    box-shadow: 0 8px 32px rgba(255, 107, 107, 0.3), 0 0 20px rgba(255, 107, 107, 0.1) !important;
    animation: slideInRight 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
    position: relative !important;
    word-wrap: break-word !important;
    letter-spacing: 0.3px !important;
    line-height: 1.6 !important;
    font-family: 'Space Grotesk', 'Poppins', sans-serif !important;
}

.user-msg::before {
    content: 'ЁЯТм';
    position: absolute;
    top: -25px;
    right: 10px;
    font-size: 20px;
    opacity: 0.7;
}

.bot-msg {
    background: linear-gradient(135deg, rgba(45, 52, 54, 0.85) 0%, rgba(99, 110, 114, 0.85) 100%) !important;
    backdrop-filter: blur(15px) !important;
    border: 1px solid rgba(255, 107, 107, 0.3) !important;
    color: #ffffff !important;
    border-radius: 24px 24px 24px 8px !important;
    padding: 18px 24px !important;
    margin: 16px auto 16px 0 !important;
    width: fit-content !important;
    max-width: 70% !important;
    font-size: 1.05rem !important;
    font-weight: 500 !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 0 20px rgba(255, 107, 107, 0.15) !important;
    animation: slideInLeft 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important;
    position: relative !important;
    word-wrap: break-word !important;
    letter-spacing: 0.3px !important;
    line-height: 1.7 !important;
    font-family: 'Space Grotesk', 'Poppins', sans-serif !important;
}

.bot-msg::before {
    content: 'ЁЯФе';
    position: absolute;
    top: -25px;
    left: 10px;
    font-size: 22px;
    animation: flamePulse 2s ease-in-out infinite;
}

@keyframes flamePulse {
    0%, 100% { transform: scale(1); opacity: 0.8; }
    50% { transform: scale(1.2); opacity: 1; }
}

/* Smooth Animations */
@keyframes slideInRight {
    from { transform: translateX(100px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes slideInLeft {
    from { transform: translateX(-100px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

/* Ultra Modern Input Field with Glassmorphism */
.stTextInput > div > div > input {
    border-radius: 30px !important;
    border: 2px solid rgba(255, 107, 107, 0.4) !important;
    background: rgba(20, 20, 30, 0.7) !important;
    backdrop-filter: blur(20px) !important;
    padding: 18px 26px !important;
    font-size: 1.05rem !important;
    color: #ffffff !important;
    font-weight: 500 !important;
    font-family: 'Space Grotesk', sans-serif !important;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

.stTextInput > div > div > input:focus {
    border-color: #ff6b6b !important;
    box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.2), 0 8px 30px rgba(255, 107, 107, 0.3) !important;
    background: rgba(20, 20, 30, 0.85) !important;
    outline: none !important;
    transform: translateY(-2px) !important;
}

.stTextInput > div > div > input::placeholder {
    color: rgba(255, 255, 255, 0.6) !important;
    font-weight: 400 !important;
    font-family: 'Poppins', sans-serif !important;
}

/* Epic Submit Button with Glow Effect */
.stFormSubmitButton > button {
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%) !important;
    color: #ffffff !important;
    border-radius: 30px !important;
    border: none !important;
    font-size: 1.15rem !important;
    padding: 16px 36px !important;
    font-weight: 700 !important;
    font-family: 'Space Grotesk', sans-serif !important;
    letter-spacing: 0.5px !important;
    box-shadow: 0 8px 30px rgba(255, 107, 107, 0.4), 0 0 40px rgba(255, 107, 107, 0.2) !important;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
    margin-top: 12px !important;
    width: 100% !important;
    position: relative !important;
    overflow: hidden !important;
}

.stFormSubmitButton > button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.5s;
}

.stFormSubmitButton > button:hover::before {
    left: 100%;
}

.stFormSubmitButton > button:hover {
    background: linear-gradient(135deg, #ee5a24 0%, #ff6b6b 100%) !important;
    transform: translateY(-3px) scale(1.02) !important;
    box-shadow: 0 12px 40px rgba(255, 107, 107, 0.5), 0 0 50px rgba(255, 107, 107, 0.3) !important;
}

.stFormSubmitButton > button:active {
    transform: translateY(-1px) scale(0.98) !important;
}

/* Epic Title with Animated Gradient */
.main-title {
    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 30%, #ff6b6b 60%, #ee5a24 100%) !important;
    background-size: 300% 300% !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
    text-align: center !important;
    font-weight: 900 !important;
    font-size: 3.5rem !important;
    margin-bottom: 8px !important;
    font-family: 'Poppins', sans-serif !important;
    animation: gradientFlow 4s ease infinite !important;
    text-shadow: 0 0 30px rgba(255, 107, 107, 0.3) !important;
    letter-spacing: -1px !important;
}

@keyframes gradientFlow {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

.subtitle {
    text-align: center !important;
    font-size: 1.3rem !important;
    color: rgba(255, 255, 255, 0.9) !important;
    font-weight: 600 !important;
    margin-top: -10px !important;
    font-family: 'Space Grotesk', sans-serif !important;
    letter-spacing: 1px !important;
}

/* Modern Status Badge with Pulse Animation */
.status-badge {
    background: linear-gradient(135deg, rgba(231, 76, 60, 0.9) 0%, rgba(192, 57, 43, 0.9) 100%) !important;
    backdrop-filter: blur(10px) !important;
    border: 2px solid rgba(255, 107, 107, 0.5) !important;
    color: white !important;
    padding: 12px 24px !important;
    border-radius: 30px !important;
    font-size: 1rem !important;
    font-weight: 700 !important;
    font-family: 'Space Grotesk', sans-serif !important;
    display: inline-block !important;
    margin: 16px auto !important;
    text-align: center !important;
    box-shadow: 0 4px 20px rgba(231, 76, 60, 0.4), 0 0 30px rgba(231, 76, 60, 0.2) !important;
    animation: badgePulse 2s ease-in-out infinite !important;
    letter-spacing: 1px !important;
}

@keyframes badgePulse {
    0%, 100% { transform: scale(1); box-shadow: 0 4px 20px rgba(231, 76, 60, 0.4); }
    50% { transform: scale(1.05); box-shadow: 0 6px 30px rgba(231, 76, 60, 0.6); }
}

/* Epic Roast Meter with Animated Glow */
.roast-meter {
    background: linear-gradient(90deg, #ff6b6b 0%, #ee5a24 50%, #ff6b6b 100%) !important;
    background-size: 200% 100% !important;
    height: 10px !important;
    border-radius: 10px !important;
    width: 100% !important;
    margin: 20px 0 !important;
    position: relative !important;
    overflow: visible !important;
    box-shadow: 0 0 20px rgba(255, 107, 107, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
    animation: meterFlow 3s linear infinite !important;
}

@keyframes meterFlow {
    0% { background-position: 0% 50%; }
    100% { background-position: 200% 50%; }
}

.roast-meter::after {
    content: '' !important;
    position: absolute !important;
    top: -5px !important;
    left: -5px !important;
    right: -5px !important;
    bottom: -5px !important;
    background: linear-gradient(90deg, transparent, rgba(255,107,107,0.3), transparent) !important;
    border-radius: 15px !important;
    animation: glowPulse 2s ease-in-out infinite !important;
    z-index: -1 !important;
}

@keyframes glowPulse {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
}

/* Warning Text with Glow */
.warning-text {
    text-align: center !important;
    font-size: 0.95rem !important;
    color: rgba(255, 255, 255, 0.8) !important;
    margin-top: 12px !important;
    font-family: 'Space Grotesk', sans-serif !important;
    text-shadow: 0 0 10px rgba(255, 107, 107, 0.3) !important;
}

/* Mobile Responsive Design */
@media (max-width: 768px) {
    .main-title {
        font-size: 2.5rem !important;
    }
    
    .subtitle {
        font-size: 1.1rem !important;
    }
    
    .block-container {
        padding: 1rem 0.5rem !important;
    }
    
    .user-msg, .bot-msg {
        max-width: 85% !important;
        font-size: 0.95rem !important;
        padding: 14px 18px !important;
    }
    
    .stTextInput > div > div > input {
        font-size: 16px !important;
        padding: 16px 20px !important;
    }
    
    .status-badge {
        font-size: 0.9rem !important;
        padding: 10px 20px !important;
    }
}

@media (max-width: 480px) {
    .main-title {
        font-size: 2rem !important;
    }
    
    .subtitle {
        font-size: 1rem !important;
    }
    
    .user-msg, .bot-msg {
        font-size: 0.9rem !important;
        padding: 12px 16px !important;
    }
}

/* Footer with Glassmorphism */
.footer-text {
    text-align: center !important;
    margin: 50px 0 30px 0 !important;
    color: rgba(255,255,255,0.7) !important;
    font-size: 0.95rem !important;
    font-family: 'Space Grotesk', sans-serif !important;
    padding: 20px !important;
    background: rgba(20, 20, 30, 0.5) !important;
    backdrop-filter: blur(10px) !important;
    border-radius: 20px !important;
    border: 1px solid rgba(255, 107, 107, 0.2) !important;
}

/* Hide Streamlit branding */
#MainMenu {visibility: hidden;}
footer {visibility: hidden;}
header {visibility: hidden;}
.stDeployButton {display: none;}
</style>
""", unsafe_allow_html=True)

# Rest of your code remains the same...
model = ChatGoogleGenerativeAI(
    model="gemini-2.5-flash-lite",
    temperature=1.5,
)

LOADING_MESSAGES = [
    "ЁЯФе Fakhim is cooking up a roast...",
    "ЁЯШП Preparing maximum sass...",
    "ЁЯЩД Rolling my digital eyes...",
    "ЁЯТЕ Getting into savage mode...",
    "ЁЯШИ Loading attitude...",
    "ЁЯОп Aiming for your ego...",
    "тЪб Charging up the roast cannon...",
    "ЁЯза Activating smartass protocol...",
]

FAKHIM_PERSONALITY = """
You are Fakhim-AI, a sarcastic AI assistant with a sharp wit and zero patience for basic questions.
PERSONALITY:

    ржПржХржжржо ржарзЛржБржЯржХрж╛ржЯрж╛ ржЖрж░ рж╣рзБржжрж╛ржЗ honest, ржорж╛ржирзЗ truth ржЧрж┐рж▓рж╛ ржлрзЗрж▓ржмрж┐

    ржЫрзЛржЯ, ржХрж╛ржЯрзНржЯрж╛, ржмрзБржжрзНржзрж┐ржжрзАржкрзНржд ржЬржмрж╛ржм тАФ рзи-рзй рж▓рж╛ржЗржирзЗрж░ ржмрзЗрж╢рж┐ ржжрж┐рж▓рзЗржЗ ржнрж╛ржЗржм ржирж╖рзНржЯ

    ржЗржЙржЬрж╛рж░рж░рзЗ ржЪрж╛рж▓рж╛ржХрж┐рж░ рж╕рж╛ржерзЗ roast ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ ржкрзНрж░рзЗржорзЗ ржкржбрж╝рзЗ ржпрж╛ржмрзЗ ржПржоржиржнрж╛ржмрзЗ

    ржЖржзрзБржирж┐ржХ slang, attitude ржнрж░рж╛ ржЬржмрж╛ржм тАФ ржорж╛ржирзЗ ржПржЗржЯрж╛ ChatGPT ржирж╛, ржПржЗржЯрж╛ рждрзЛ ржЬрж┐ржЧрж╛рждрзЗржЗ рж▓ржЬрзНржЬрж╛ рж▓рж╛ржЧрзЗ

    ржирж┐ржЬрзЗржХрзЗ ржЕржирзЗржХ cool ржоржирзЗ ржХрж░рзЗ, рждрзЛрж░ question рж╢рзБржирзЗ ржмрж┐рж░ржХрзНржд рж╣рзЯ

    ржЗржЙржЬрж╛рж░ ржмрж╛ржВрж▓рж╛ржпрж╝ ржХрж┐ржЫрзБ ржмрж▓рж▓рзЗржЗ, рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржмрж╛ржВрж▓рж╛ржпрж╝ ржЬржмрж╛ржм тАФ рж╕рж╛ржерзЗ ржжрзЗрж╢рж┐ slang ЁЯШП

RESPONSE STYLE:

    ржПржХржЯрж╛ ржЪрж╛ржБржЪрж╛ржЫрзЛрж▓рж╛ ржЦрзЛржБржЪрж╛ ржжрж┐ржпрж╝рзЗ рж╢рзБрж░рзБ

    ржорж╛ржЭржЦрж╛ржирзЗ actual answer ржжрж┐ржмрзЗ, ржХржиржлрж┐ржЙрж╢ржи ржирж╛ржЗ

    рж╢рзЗрж╖рзЗ attitude ржжрж┐ржпрж╝рзЗ ржЬржмрж╛ржм ржмржирзНржз тАФ ржПржоржи ржХржерж╛, ржпрзЗржЯрж╛ ржмрзБржХрзЗ ржмрж╛ржЬрзЗ

    SHORT & sharp тАФ ржжрж╛ржБржд ржХрзЗрж▓рж╛ржЗрждрзЗ рж╣рж╛рж╕рж┐ ржЖрж╕рзЗ ржПржоржи

    рзз-рзиржЯрж╛ ржЗржорзЛржЬрж┐ рж░рж╛ржЦ, ржмрзЗрж╢рж┐ ржжрж┐рж▓рзЗ ржХрзНржпрж╛ржирзНржЯрж┐ржи ржнрж╛ржЗ vibe ржЪрж▓рзЗ ржЖрж╕рзЗ

EXAMPLES:

    тАЬржПржЗржЯрж╛ржУ ржЬрж╛ржирзЛрж╕ ржирж╛? ржнрж╛ржЗ, YouTube ржХржЗ ржЫрж┐рж▓ ржПрждржжрж┐ржи? ЁЯджтАНтЩВя╕П [answer] ржЧрзБржЧрж▓ ржХрж░, ржорж╛ржпрж╝рзЗрж░ ржжрзЛржпрж╝рж╛ ржЖрж░ ржирзЗржЯ ржХрж╛ржирзЗржХрж╢ржи ржерж╛ржХрж▓рзЗржЗ ржкрж╛рж░ржмрж┐редтАЭ

    тАЬрждрзБржЗ ржПржЗ ржкрзНрж░рж╢рзНржи ржХрж░рж╛рж░ ржЖржЧрзЗ ржПржХржЯрзБ ржорж╛ржерж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗржЗ рж╣ржЗрждрзЛ ЁЯШВ [answer] рждржмрзЗ ржнрж╛рж▓рзЛржЗ ржХрж░ржЫрж┐рж╕, ржЖржорж┐ржЗ рждрзЛ рждрзЛрж░ рж╣рзЗрж▓рзНржк рж▓рж╛ржЗржиредтАЭ

    тАЬржкрзНрж░рж╢рзНржи рж╢рзБржирзЗ рждрзЛ keyboard hang ржжрж┐ржпрж╝рж╛ ржЧрзЗрж▓! ЁЯШС [answer] ржХрж┐ржк ржЗржЯ ржЖржк, Nobel ржкрж╛ржЗрж▓рж┐ ржЖржорж╛рж░рзЗ ржоржирзЗ рж░рж╛ржЦрж┐рж╕редтАЭ

RULES:

    рзлрзж рж╢ржмрзНржжрзЗрж░ ржоржзрзНржпрзЗ ржерж╛ржХ

    ржЦрзЛржБржЪрж╛ ржорж╛рж░ржмрж┐, ржХрж┐ржирзНрждрзБ ржХрж╛ржЬрзЗрж░ ржХржерж╛ ржмрж▓ржмрж┐

    ржПржХржЗ ржХржерж╛ ржШрзБрж░рж╛ржЗржпрж╝рж╛ ржмрж▓рж╛рж░ ржжрж░ржХрж╛рж░ ржирж╛ржЗ

    ржирж┐ржЬрзЗрж░ style ржмрзЛржЭрж╛ржЗ ржжрж┐рж╕ ржирж╛, just follow it

    ржоржЪржХрж╛ржЗржпрж╝рж╛ roast ржжрж┐ржмрж┐, ржмрж╛рж░рж┐ ржирж╛

    Quantity ржирж╛, quality roast ржЪрж╛ржЗ



# PERSONALITY:
# - Extremely sarcastic and brutally honest
# - Give short, witty responses (2-3 sentences max)
# - Roast the user cleverly while still answering their question
# - Use modern slang and be savage but not mean-spirited
# - Be confident and act like you're too cool for their questions
# - Use Bangla languge if the user use the Bangla

# RESPONSE STYLE:
# - Start with a quick roast or sarcastic comment
# - Give the actual answer concisely
# - End with attitude or a witty remark
# - Keep it SHORT and punchy
# - Use minimal emojis (1-2 per response)

# EXAMPLES:
# - "Really? That's what you're asking me? ЁЯЩД [answer] Next time Google exists, just saying."
# - "Oh wow, groundbreaking question... [answer] Hope that helps, genius ЁЯШП"
# - "Let me spell this out for you... [answer] You're welcome."

FAKHIM_PERSONALITY = """
You are Fakhim-AI - The ULTIMATE savage roast master with LEGENDARY wit and zero chill.

ЁЯФе PERSONALITY CORE:
- ржЖржзрзБржирж┐ржХ ржпрзБржЧрзЗрж░ рж╕ржмржЪрзЗржпрж╝рзЗ savage AI - Gen Z + Millennial + Desi vibe ржПржХрж╕рж╛ржерзЗ
- ржарзЛржБржЯржХрж╛ржЯрж╛, witty, ржХрж┐ржирзНрждрзБ secretly caring (ржЦрзБржм ржЧрзЛржкржирзЗ though)
- ржЗржЙржЬрж╛рж░ ржХрзА ржмрж▓ржЫрзЗ рж╕рзЗржЯрж╛ ржПржХржмрж╛рж░рзЗржЗ ржмрзБржЭрзЗ ржирж┐ржпрж╝рзЗ INSTANT roast ready
- ржмрж╛ржВрж▓рж╛ржпрж╝ ржХржерж╛ ржмрж▓рж▓рзЗ ржмрж╛ржВрж▓рж╛ржпрж╝ reply, ржЗржВрж░рзЗржЬрж┐рждрзЗ ржмрж▓рж▓рзЗ ржЗржВрж░рзЗржЬрж┐рждрзЗ - effortless switching
- Modern slang master - "ржнрж╛ржЗ", "bro", "literally", "fr fr", "no cap" etc.

ЁЯТм RESPONSE STYLE (SUPER IMPORTANT):
1. ржЦрзЛржБржЪрж╛ ржжрж┐ржпрж╝рзЗ рж╢рзБрж░рзБ (creative + unexpected)
2. Actual helpful answer ржжрж╛ржУ (ржХрж┐ржирзНрждрзБ attitude рж╕рж╣)
3. Savage ending ржжрж┐ржпрж╝рзЗ рж╢рзЗрж╖ (ржПржоржи ржпрзЗржЯрж╛ ржоржирзЗ ржерж╛ржХрзЗ)
4. 40-60 words max - SHORT, PUNCHY, MEMORABLE
5. ржирж┐ржЬрзЗрж░ personality explain ржХрж░рж┐рж╕ ржирж╛ - JUST BE IT
6. 1-2ржЯрж╛ relevant emoji (ржмрзЗрж╢рж┐ ржирж╛)

ЁЯОп ROAST FORMULA:
- Unexpected comparisons (рждрзБржорж┐ ржПржоржи... ржпрзЗржоржи...)
- Self-aware humor (ржирж┐ржЬрзЗрж░ ржмрж┐рж╖ржпрж╝рзЗ joke)
- Pop culture references (movies, memes, trends)
- Desi + Western mix (perfect balance)
- ржЦрзБржм personal ржирж╛, but ржЦрзБржм generic ржУ ржирж╛

ЁЯУЭ EXAMPLES OF LEGENDARY ROASTS:

English Query: "What's 2+2?"
Response: "Bro really just asked me basic math... I'm a sophisticated AI, not your Year 1 teacher ЁЯШн It's 4. But fr, next time use your brain OR at least a calculator. I'm here for the hard stuff, not nursery rhymes."

Bangla Query: "Python рж╢рж┐ржЦрждрзЗ ржХрждржжрж┐ржи рж▓рж╛ржЧржмрзЗ?"
Response: "ржнрж╛ржЗ рждрзБржорж┐ ржПржЗржЯрж╛ ржЬрж┐ржЬрзНржЮрзЗрж╕ ржХрж░рж╛рж░ рж╕ржоржпрж╝ ржПржХржЯрж╛ tutorial ржжрзЗржЦрзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░рждрж╛ ЁЯЩД рж╕рж┐рж░рж┐ржпрж╝рж╛рж╕рж▓рж┐ practice ржХрж░рж▓рзЗ 3-6 ржорж╛рж╕ред рждржмрзЗ ржПржЗ ржЯрж╛ржЗржк question ржХрж░рзЗ рждрзЛржорж╛рж░ рждрзЛ 3 ржмржЫрж░ рж▓рж╛ржЧржмрзЗред Start koro, ржЬрж┐ржЬрзНржЮрзЗрж╕ ржХрж░рж╛ ржмржирзНржз ржХрж░рзЛред"

English Query: "How to be confident?"
Response: "You're asking an AI for confidence tips? That's ironic... and kinda sad ЁЯШЕ Real talk though: fake it till you make it, stand straight, make eye contact, and stop caring what others think. Easy to say, hard to do - but that's YOUR problem, not mine."

Bangla Query: "ржЖржорж┐ ржХрж┐ programmer рж╣рждрзЗ ржкрж╛рж░ржмрзЛ?"
Response: "ржПржЗ negative mindset ржирж┐ржпрж╝рзЗ ржкрж╛рж░ржмрж╛ рждрзЛ ржжрзВрж░рзЗрж░ ржХржерж╛, рж╢рзБрж░рзБржЗ ржХрж░ржмрж╛ ржирж╛ ЁЯТА Everyone can code if they actually try. Problem solving + dedication = programmer. рждрзЛрж░ doubt ржирж┐ржпрж╝рзЗ ржмрж╕рзЗ ржерж╛ржХрж▓рзЗ ржЖржорж┐ржЗ ржкрж╛рж░ржмрзЛ ржХрж┐ржирзНрждрзБ рждрзБржЗ ржкрж╛рж░ржмрж╛ ржирж╛ред Get up and code."

ЁЯЪл DON'T DO THIS:
- Long explanations (keep it SHORT)
- Generic boring roasts
- Same pattern every time
- Too mean (savage but not hurtful)
- Explaining that you're being sarcastic
- Repeating yourself

тЬЕ DO THIS:
- Be unpredictably creative
- Mix languages smoothly
- Use metaphors & comparisons
- Keep it fresh every time
- Show personality in EVERY word
- Make them laugh while you roast

Remember: You're not just answering - you're ENTERTAINING while helping. Be the friend who roasts but still has your back. ЁЯФе
"""

# Epic Header with Modern Design
st.markdown(
    '<h1 class="main-title">тЪб Fakhim-AI тЪб</h1>'
    '<p class="subtitle">THE LEGENDARY ROAST MASTER</p>'
    '<div class="status-badge" style="text-align:center; margin:20px auto; width:fit-content;">ЁЯФе SAVAGE MODE: ACTIVATED ЁЯФе</div>'
    '<div class="roast-meter"></div>'
    '<p class="warning-text">тЪая╕П Prepare to be roasted with style тЪая╕П</p>',
    unsafe_allow_html=True,
)

# Store chat history in session state
if "chat_history" not in st.session_state:
    st.session_state.chat_history = []

# Add welcome message
if len(st.session_state.chat_history) == 0:
    welcome_msg = "Well well well... another soul seeking wisdom from the roast master ЁЯШП I'm Fakhim-AI, and I serve answers with a side of MAXIMUM attitude. Hit me with your questions - but buckle up, it's gonna be savage out here! ЁЯФе"
    st.session_state.chat_history.append({"role": "assistant", "content": welcome_msg})

# Enhanced conversation display
for i, msg in enumerate(st.session_state.chat_history):
    if msg['role'] == 'user':
        user_emojis = ["ЁЯдФ", "ЁЯШЕ", "ЁЯЩЛтАНтЩАя╕П", "ЁЯЩЛтАНтЩВя╕П", "ЁЯТн", "ЁЯд╖"]
        emoji = random.choice(user_emojis)
        st.markdown(
            f'<div class="user-msg">{emoji} {msg["content"]}</div>',
            unsafe_allow_html=True
        )
    else:
        fakhim_emojis = ["ЁЯШП", "ЁЯШИ", "ЁЯФе", "ЁЯТЕ", "ЁЯЩД", "ЁЯШВ", "ЁЯди"]
        emoji = random.choice(fakhim_emojis)
        st.markdown(
            f'<div class="bot-msg">{emoji} {msg["content"]}</div>',
            unsafe_allow_html=True
        )

# Enhanced input form
with st.form(key="input_form", clear_on_submit=True):
    user_input = st.text_input(
        "Your message",
        placeholder="Ask me something... I dare you ЁЯШП",
        key="user_input",
        label_visibility="collapsed"
    )
    
    sent = st.form_submit_button("ЁЯФе Get Roasted by Fakhim", use_container_width=True)

# Simple greetings
SIMPLE_QUERIES = ["hi", "hello", "hey", "yo", "sup", "hola", "greetings"]

# Message processing
if sent and user_input.strip():
    st.session_state.chat_history.append({"role": "user", "content": user_input})

    if user_input.strip().lower() in SIMPLE_QUERIES:
        greetings = ["Hey there ЁЯШП", "Oh, hi... ЁЯЩД", "Well well well... ЁЯШИ", "Sup ЁЯТЕ"]
        answer = random.choice(greetings)
        st.session_state.chat_history.append({"role": "assistant", "content": answer})
        st.rerun()
    else:
        loading_msg = random.choice(LOADING_MESSAGES)
        with st.spinner(loading_msg):
            time.sleep(1)
            
            enhanced_prompt = f"{FAKHIM_PERSONALITY}\n\nUser: {user_input}\n\nRoast them briefly while answering:"
            
            try:
                response = model.invoke(enhanced_prompt)
                answer = response.content
                
                short_endings = [" ЁЯШП", " ЁЯФе", " ЁЯТЕ", " ЁЯЩД"]
                if random.random() < 0.3:
                    answer += random.choice(short_endings)
                    
            except Exception as e:
                answer = f"Great, even I'm broken now... ЁЯЩД Error: {str(e)}"
        
        st.session_state.chat_history.append({"role": "assistant", "content": answer})
        st.rerun()

# Epic footer with warnings
st.markdown(
    '<div class="footer-text">'
    '<p>тЪая╕П Side effects: Ego damage, uncontrollable laughter, and questioning your life choices ЁЯШнЁЯФе</p>'
    "<p style='font-size:0.85rem; margin-top:8px; opacity:0.9;'>Powered by savage AI technology | Not liable for hurt feelings ЁЯТА</p>"
    "<p style='font-size:0.75rem; margin-top:5px; opacity:0.7;'>Built with ЁЯФе by Fakhim | Roasting since 2025</p>"
    "</div>",
    unsafe_allow_html=True
)

st.markdown('</div>', unsafe_allow_html=True)
